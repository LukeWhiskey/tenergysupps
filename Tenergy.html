<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="CSS/containerTheme.css">
    <link rel="stylesheet" href="CSS/custQuickNav.css">
    <link rel="stylesheet" href="CSS/dynaBanner.css">
    <link rel="stylesheet" href="CSS/scrollBar.css">
    <link rel="stylesheet" href="CSS/offer.css">
    <script src="JS/backgroundViewPort.js"></script>
    <!-- <script src="JS/searchBarClicked.js"></script>
    <script src="JS/scrollingBanner.js"></script>
    <script src="JS/searchBar.js"></script> -->
    <style>
        .userItemCont {
            padding-left: 25px;
        }
            .userItemCont:hover {
                cursor: pointer;
                background-color: rgb(20, 20, 20);
            }
        .userItemContent {
            display: none;
            height: auto;
            position: absolute;
            margin-top: 50px;
            width: 300px;
            background-color: rgb(20, 20, 20);
        }
        #cookieConsent {
            width: 100%;
            min-width: 780px;
            height: auto;
            bottom: 0px;
            position: fixed;
            background-color: rgba(30, 30, 30, 0.5);
            color: rgb(0, 200, 0);
            border-top: 2px solid green;
            padding: 20px;
            z-index: 99;
        }
        #cookieButCont {
            float: right;
        }
        #terms {
            margin: 15px;
            min-width: 400px;
            float: left;
            text-align: center;
        }
        .cookieBut {
            float: right;
            background-color: black;
            border: 2px solid rgb(0, 100, 0);
            border-radius: 2px;
            margin-left: 20px;
            padding: 10px;
            padding-left: 15px;
            padding-right: 15px;
            margin-top: 5px;
        }
        .cookieBut:hover {
            cursor: pointer;
            border: 2px solid rgb(0, 200, 0);
            transition: 0.125s;
        }
        #accept {

        }
        #necassary {

        }
    </style>
</head>
<body style="margin-top: -20px; min-width: 780px;">
    <style>
        * {
            max-width: 100%;
            margin: 0px;
            padding: 0px;
            color: white;
            font-family: Arial;
        }
    </style>
    <div class="d-flex align-items-center justify-content-center" id="searchCont">
        <input class="searchBar" id="searchActive" placeholder="Search for a Product...">
        <button id="search"></button>
    </div>
    <cont>
        <div class="dynaTheme" id="theme">
            <div id="staticBan">
                <table class="custNav">
                    <td class="custNavBut"><a class="custNavButHyp">Fast Return</a></td>
                    <td class="custNavBut"><a class="custNavButHyp">Contact Us</a></td>
                    <td class="custNavBut"><a class="custNavButHyp">GB</a></td>
                </table>
            </div>
            <div id="dynaBanNavCont">
                <div id="scrollCont">
                    <div id="banCont"><a href="/" id="banContHref" style="font-family: Tarrget3DItalic-LdKg; color: rgb(0, 200, 0); text-decoration: none;"></a></div>
                    <table class="userCont">
                        <td class="userItemCont" id="account" style="height: 79px;">
                            <a href="/myaccount">
                                <div class="userItem" id="accountImg"></div>
                                <div class="userItemText" id="accountText">Account</div>
                                <div class="userItemContent" id="accountItemText" style="line-height: 25px; left: 0px;">
                                    <div id="stickyAccount" style="height: 100px; width: 100%; margin-bottom: 20px; margin-top: 5px;"></div>
                                    <div id="stickyMember" style="background-color: rgb(30, 30, 30); width: 100%;">
                                        <table>
                                            <a href=""><td class="mem" style="float: left; line-height: 30px; padding: 5px; padding-left: 15px;">Your Orders</td></a>
                                            <a href=""> <td class="mem" style="float: left; line-height: 30px; padding: 5px; padding-left: 15px;">Your Wishlist</td></a>
                                            <a href=""><td class="mem" style="float: left; line-height: 30px; padding: 5px; padding-left: 15px;">Your Referals</td></a>
                                        </table>
                                    </div>
                                </div>
                             </a>
                        </td>
                        <td class="userItemCont" id="basket">
                            <a href="/checkout">
                                <div class="userItem" id="basketImg"></div>
                                <div class="userItemText" id="basketText">Basket (0)</div>
                                <div class="userItemContent" id="basketItemText"></div>
                            </a>
                        </td>
                    </table>
                    <table class="dynaBanNav" id="nav"></table>
               </div>
            </div>
            <div class="offerCont">
                <a>
                    <div class="offer">
                        WINTER SALE | SAVE 40% OFF USE CODE
                        <div class="offerCode">SAVE40</div>
                    </div>
                </a>
            </div>
            <div class="backHeadCont">
                <h1 class="unleash">UNLEASH.<br />THE BEAST.</h1>
            </div>
        </div>
        <div style="background-color: rgba(10, 10, 10); height: 100vh;">

        </div>
    </cont>
    <script>
        /*
        function setCookie(cname, cvalue, exdays) {
            const d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60));
            let expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }
        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return false;
        }
        function checkCookie(cname) {
            let cookieName = getCookie(cname);
            if (cookieName == false) {
                crypto.randomBytes(20, (err, num) => {
                    alert("dcdw");
                    setCookie(cname, num, 31);
                    return true;
                });
            }
            return false;
        }
        alert(checkCookie("userID"));
        if (getCookie("userID") == false) {
            checkCookie("anonID");
            $('#accountItemText').append("<a>Login</a>");
            $('#accountItemText').append("<a>Register</a>");
        }
        else {
            $('#accountItemText').append("<a>Signout</a>");
            $('#accountItemText').append("<a>Profile</a>");
            $('#accountItemText').append("<a>Orders</a>");
        }
        */
        if (sessionStorage.getItem("userID") != null) {
            sessionStorage.removeItem("anonID");
            $('#stickyAccount').css('height', '15px');
            $('#stickyAccount').append('<div style=\"padding-left: 15px;\">Hello, Luke<a onclick=\"logout()\" style=\"float: right; padding-right: 10px;\">Log Out</a></div>');
            $(".mem").hover(function () {
                $(this).css('background-color', 'rgb(20, 20, 20)');
            }, function () {
                $(this).css('background-color', 'rgb(30, 30, 30)');
            });
            function logout() {
                sessionStorage.removeItem("userID");
                if (sessionStorage.getItem("anonID") == null) {
                    sessionStorage.setItem("anonID", "djibnwiuu3279832");
                }
                location.reload();
            };
        }
        else if (sessionStorage.getItem("userID") == null) {
            sessionStorage.setItem("anonID", "32883892");
            $('#stickyAccount').append("<td><a href=\"login\" id=\"login\" style=\"color: white; border: 2px solid black; border-radius: 2px; box-shadow: 2px 2px 2px black; background-color: rgb(0, 150, 0); width: calc(100% - 20px); padding: 10px; left: 10px; position: absolute; text-align: center;\">Login</a></td>");
            $('#stickyAccount').append("<td><a href=\"register\" id=\"register\" style=\"color: white; border: 2px solid black; border-radius: 2px; box-shadow: 2px 2px 2px black; background-color: rgb(0, 150, 0); width: calc(100% - 20px); padding: 10px; left: 10px; position: absolute; text-align: center;\">Register</br></a></td>");
            setInterval(function () {
                $('#register').css('margin-top', document.getElementById("login").offsetHeight + 10);
            });
            $(".mem").hover(function () {
                $(this).css('background-color', 'rgb(20, 20, 20)');
            }, function () {
                $(this).css('background-color', 'rgb(30, 30, 30)');
            });
            $("#login").hover(function () {
                $(this).css('background-color', 'rgb(0, 200, 0)');
                $(this).css('transition', '0.1s ease-in-out');
            }, function () {
                $(this).css('background-color', 'rgb(0, 150, 0)');
                $(this).css('transition', '0s');
            });
            $("#register").hover(function () {
                $(this).css('background-color', 'rgb(0, 200, 0)');
                $(this).css('transition', '0.1s ease-in-out');
            }, function () {
                $(this).css('background-color', 'rgb(0, 150, 0)');
                $(this).css('transition', '0s');
            });
        }
    </script>
    <script>
        $(document).ready(function () {
            setInterval(function () {
                $('.userItemContent').css("width", document.getElementById("account").offsetWidth * 2);
                $('.mem').css('width', document.getElementById("accountItemText").offsetWidth);
                if (window.innerWidth < 1200) {
                }
                else {
                }
            });
            $('.dynaBanNavBut').css('max-width', document.body.offsetWidth * 0.6);
            $('#account').hover(function () {
                $('#accountItemText').css('display', 'block');
                $('cont').append("<div id=\"backShad\"></div>");
            }, function () {
                $('#accountItemText').css('display', 'none');
                $('#backShad').remove('#backShad');
            });
            $('#basket').hover(function () {
                $('#basketItemText').css('display', 'block');
                $('cont').append("<div id=\"backShad\"></div>");
            }, function () {
                $('#basketItemText').css('display', 'none');
                $('#backShad').remove('#backShad');
            });
        });
    </script>
    <script>
        //Cookie Container
        $(document).ready(function () {
            $('cont').append("<div id=\"cookieConsent\"></div>");
            $('#cookieConsent').append("<div id=\"cookieButCont\"></div>")
            $('#cookieConsent').append("<div id=\"terms\">You need to accept these for the site to function properly</div>");
            setInterval(function () {
                var buttonContWidth = document.getElementById("cookieButCont").offsetWidth;
                $('#terms').css('width', document.body.offsetWidth - buttonContWidth - 100);
                if (window.innerWidth < 945) {
                    $('#terms').css('margin-left', (window.innerWidth - document.getElementById("terms").offsetWidth) / 2 - 30);
                    $('#terms').css('margin-bottom', 0);
                    $('#cookieButCont').css('float', 'left');
                    $('#cookieButCont').css('margin-left', (window.innerWidth - document.getElementById("cookieButCont").offsetWidth) / 2 - 30);
                }
                else {
                    $('#terms').css('margin-left', 0);
                    $('#terms').css('margin-bottom', 15);
                    $('#cookieButCont').css('float', 'right');
                    $('#cookieButCont').css('margin-left', 0);
                }
            });
            $('#cookieButCont').append("<div class=\"cookieBut\" id=\"accept\">Accept Cookies</div>");
            $('#cookieButCont').append("<div class=\"cookieBut\" id=\"necassary\">Necassary Cookies</div>");
            $('#cookieButCont').append("<a target=\"_blank\" href=\"https://www.google.com\"><div class=\"cookieBut\" id=\"accept\">About Cookies</div></a>");
            $('#accept').click(function () {
                $('#cookieConsent').css('bottom', '-20px');
                $('#cookieConsent').css('opacity', '0');
                $('#cookieConsent').css('transition', '0.125s');
            });
            $('#necassary').click(function () {
                $('#cookieConsent').css('bottom', '-20px');
                $('#cookieConsent').css('opacity', '0');
                $('#cookieConsent').css('transition', '0.125s');
            });
        });
    </script>
    <script>
        // defining the positions and dimensions of the searchBar for mobile and desktop
        $(document).ready(function () {
            var basketlen = 4;
            var userHeight = document.getElementById("scrollCont").offsetHeight + document.getElementById("nav").offsetHeight;
            $('#banCont').css('height', userHeight);
            $('.userCont').css('height', document.getElementById("banCont").offsetHeight);
            setInterval(function () {
                $('#search').css('transition', '0s');
                var dimensions = 35;
                var staticHeight = document.getElementById("staticBan").offsetTop + document.getElementById("staticBan").offsetHeight + 20;
                if (window.innerWidth < 1200) {
                    var boxMultiCont = document.body.offsetWidth * 0.5;
                    if (window.innerWidth < 780) {
                        $('#searchCont').css('width', boxMultiCont);
                        $('#searchCont').css('margin-left', document.body.offsetWidth / 4.9);
                    }
                    else {
                        $('#searchCont').css('margin-left', window.outerWidth * (1 - 0.5) / 2.875);
                    }
                    document.getElementById('banContHref').innerHTML = "TE";
                    document.getElementById('accountText').innerHTML = "";
                    document.getElementById('basketText').innerHTML = basketlen;
                    $('#basketText').css('position', 'absolute');
                    $('#basketText').css('text-align', 'center');
                    $('#basketText').css('width', '50%');
                    $('#basketText').css('margin-top', '8.5px');
                }
                else {
                    var boxMultiCont = window.innerWidth * 0.3;
                    $('#searchCont').css('margin-left', (window.innerWidth - (boxMultiCont + dimensions)) / 2 + 40);
                    document.getElementById('banContHref').innerHTML = "Tenergy";
                    document.getElementById('accountText').innerHTML = "Account";
                    document.getElementById('basketText').innerHTML = "Basket (" + basketlen + ")";
                    $('#basketText').css('position', 'relative');
                    $('#basketText').css('text-align', 'left');
                    $('#basketText').css('width', 'auto');
                    $('#basketText').css('margin-top', '7.5px');
                }
                $('#searchCont').css('margin-top', staticHeight);
                $('#searchCont').css('width', boxMultiCont);
                $('#searchCont').css('height', dimensions);
                $('#search').css('width', dimensions);
                $('#search').css('height', dimensions);
                $('#search').css('transition', '0.1s');
                $('.searchBar').css('height', dimensions);
                $('.searchBar').css('width', boxMultiCont - dimensions);
            });
        });
    </script>
    <script>
        // Defines positioning and colours for elements within the banner, when scrolling past the custQuickNav
        $(document).ready(function () {
            var staticHeight = document.getElementById("staticBan").offsetHeight;
            var tf = 0;
            $('#banContHref').hover(function () {
                $('#banContHref').css("color", 'white');
            }, function () {
                $('#banContHref').css("color", 'rgb(0, 200, 0)');
            });
            window.addEventListener('scroll', () => {
                if (window.pageYOffset < staticHeight) {
                    $('.userCont').css('position', 'absolute');
                    $('#searchCont').css('position', 'absolute');
                    $('#banCont').css('position', 'relative');
                    $('.dynaBanNav').css('position', 'relative');
                }
                else if (window.pageYOffset > staticHeight) {
                    $('.userCont').css('top', window.pageYOffset - 35);
                    $('#searchCont').css('top', window.pageYOffset - 31);
                    $('#banCont').css('top', window.pageYOffset - 35);
                    $('.dynaBanNav').css('top', window.pageYOffset - 35);
                }
            });
            setInterval(function () {
                if (window.pageYOffset < staticHeight) {
                    $('.dynaBanNav').css('top', document.getElementById("staticBan").offsetTop);
                    $('#searchCont').css('top', 4);
                    $('.dynaBanNavBut').css('padding-top', '10px');
                    $('.dynaBanNavBut').css('padding-bottom', '10px');
                    $('.dynaBanNavBut').css('border-bottom', '0px');
                    if (tf == 1) {
                        $('.userCont').css('top', 0);
                        $('#banCont').css('top', 0);
                        $('.dynaBanNavBut').css('background-color', 'transparent');
                        $('.dynaBanNavBut').css('border-bottom', '0px');
                        tf = 0;
                    }
                    $('.dynaBanNavBut').hover(function () {
                        $(this).css('background-color', 'black');
                        $(this).css('color', 'rgb(0, 240, 0)');
                        $(this).css('border-bottom', '0px');
                    }, function () {
                        $(this).css('background-color', 'transparent');
                        $(this).css('color', 'white');
                        $(this).css('border-bottom', '0px');
                    });
                }
                if (window.pageYOffset > staticHeight) {
                    $('.dynaBanNavBut').css('background-color', 'rgb(20, 20, 20)');
                    $('.dynaBanNavBut').css('padding-top', '15px');
                    $('.dynaBanNavBut').css('padding-bottom', '15px');
                    if (tf == 0) {
                        $('.dynaBanNavBut').css('border-bottom', '1px solid rgb(0, 200, 0)');
                        tf = 1;
                    }
                    $('.dynaBanNavBut').hover(function () {
                        $(this).css('background-color', 'rgb(20, 20, 20)');
                        $(this).css('border-bottom', '1px solid rgb(240, 240, 240)');
                        $(this).css('color', 'rgb(0, 240, 0)');
                    }, function () {
                        $(this).css('background-color', 'rgb(20, 20, 20)');
                        $(this).css('border-bottom', '1px solid rgb(0, 200, 0)');
                        $(this).css('color', 'white');
                    });
                }
            });
        });
    </script>
    <script>
        // Creates background dimmer for when search bar is clicked
        $(document).ready(function () {
            var backShad = 0;
            var dynaBanNavButHeight = document.getElementById("nav").offsetTop + document.getElementById("nav").offsetHeight;
            $('#dynaBanNavCont').css('height', dynaBanNavButHeight - 2.5);
            function clickIn() {
                $('.searchBar').css('background-color', 'rgb(50, 50, 50)');
                $('.searchBar').css('color', 'rgb(0, 200, 0)');
                $('.searchBar').css('border', '1px solid rgb(0, 200, 0)');
                $('#search').css('border', '1px solid rgb(0, 200, 0)');
                $('cont').append("<div id=\"backShad\"></div>");
                $('#backShad').css('z-index', '2');
                backShad = 1;
            }
            function clickOut() {
                $('.searchBar').css('background-color', 'transparent');
                $('.searchBar').css('color', 'white');
                $('.searchBar').css('border', '1px solid rgb(0, 200, 0)');
                $('#search').css('border', '1px solid rgb(0, 200, 0)');
                $('#backShad').remove('#backShad');
                backShad = 0;
            }
            setInterval(function () {
                $('.searchBar').click(function () {
                    if (backShad == 0) {
                        clickIn();
                    }
                    else if (backShad == 1) {
                        $('#backShad').click(function () {
                            clickOut();
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>